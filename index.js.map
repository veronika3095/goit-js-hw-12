{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nconst API_KEY = '46051568-7c86afd7f3b7df8cfe693777e'; \nconst BASE_URL = 'https://pixabay.com/api/';\nlet page = 1;\n\nexport const fetchImages = async (query) => {\n    const url = `${BASE_URL}?key=${API_KEY}&q=${query}&image_type=photo&orientation=horizontal&safesearch=true&per_page=15&page=${page}`;\n    \n    try {\n        const response = await axios.get(url);\n        return response.data.hits;\n    } catch (error) {\n        throw new Error('Error fetching images');\n    }\n};\n\nexport const incrementPage = () => {\n    page++;\n};\n\nexport const resetPage = () => {\n    page = 1;\n};","import iziToast from 'izitoast';\nimport SimpleLightbox from 'simplelightbox';\n\nexport const renderGallery = (images) => {\n    const gallery = document.querySelector('.gallery');\n    \n    if (images.length === 0) {\n        iziToast.error({ message: \"Sorry, no images found.\" });\n        return;\n    }\n\n    const markup = images.map(({ webformatURL, largeImageURL, tags, likes, views, comments, downloads }) => `\n        <div class=\"gallery-item\">\n            <a href=\"${largeImageURL}\" class=\"gallery-link\">\n                <img src=\"${webformatURL}\" alt=\"${tags}\" />\n            </a>\n            <div class=\"image-info\">\n                <span>Likes: ${likes}</span>\n                <span>Views: ${views}</span>\n                <span>Comments: ${comments}</span>\n                <span>Downloads: ${downloads}</span>\n            </div>\n        </div>\n    `).join('');\n\n    gallery.innerHTML += markup;\n\n    const lightbox = new SimpleLightbox('.gallery a', {\n        captionDelay: 250,\n        captionsData: 'alt', \n    });\n\n    lightbox.refresh();\n};","import { fetchImages, incrementPage, resetPage } from './js/pixabay-api.js';\nimport { renderGallery } from './js/render-functions.js';\nimport iziToast from 'izitoast';\n\nconst searchForm = document.querySelector('.search-form');\nconst loadMoreBtn = document.createElement('button');\nloadMoreBtn.textContent = \"Load more\";\nloadMoreBtn.classList.add('load-more', 'hidden');\ndocument.body.appendChild(loadMoreBtn);\n\nlet query = '';\n\nsearchForm.addEventListener('submit', async (event) => {\n    event.preventDefault();\n    query = searchForm.elements.query.value.trim();\n\n    if (!query) return;\n\n    resetPage();\n    loadMoreBtn.classList.add('hidden');\n    await loadImages();\n});\n\nloadMoreBtn.addEventListener('click', async () => {\n    incrementPage();\n    await loadImages();\n});\n\nconst loadImages = async () => {\n    try {\n        const images = await fetchImages(query);\n        renderGallery(images);\n        loadMoreBtn.classList.remove('hidden');\n\n        if (images.length < 15) {\n            loadMoreBtn.classList.add('hidden');\n            iziToast.info({ message: \"We're sorry, but you've reached the end of search results.\" });\n        }\n\n        const galleryItemHeight = document.querySelector('.gallery-item').getBoundingClientRect().height;\n        window.scrollBy({\n            top: galleryItemHeight * 2,\n            behavior: 'smooth',\n        });\n    } catch (error) {\n        console.error(error);\n        iziToast.error({ message: \"Error fetching images.\" });\n    }\n};"],"names":["API_KEY","BASE_URL","page","fetchImages","query","url","axios","incrementPage","resetPage","renderGallery","images","gallery","iziToast","markup","webformatURL","largeImageURL","tags","likes","views","comments","downloads","SimpleLightbox","searchForm","loadMoreBtn","event","loadImages","galleryItemHeight","error"],"mappings":"owBAEA,MAAMA,EAAU,qCACVC,EAAW,2BACjB,IAAIC,EAAO,EAEJ,MAAMC,EAAc,MAAOC,GAAU,CACxC,MAAMC,EAAM,GAAGJ,CAAQ,QAAQD,CAAO,MAAMI,CAAK,6EAA6EF,CAAI,GAElI,GAAI,CAEA,OADiB,MAAMI,EAAM,IAAID,CAAG,GACpB,KAAK,IACxB,MAAe,CACZ,MAAM,IAAI,MAAM,uBAAuB,CAC1C,CACL,EAEaE,EAAgB,IAAM,CAC/BL,GACJ,EAEaM,EAAY,IAAM,CAC3BN,EAAO,CACX,ECpBaO,EAAiBC,GAAW,CACrC,MAAMC,EAAU,SAAS,cAAc,UAAU,EAEjD,GAAID,EAAO,SAAW,EAAG,CACrBE,EAAS,MAAM,CAAE,QAAS,yBAA2B,CAAA,EACrD,MACH,CAED,MAAMC,EAASH,EAAO,IAAI,CAAC,CAAE,aAAAI,EAAc,cAAAC,EAAe,KAAAC,EAAM,MAAAC,EAAO,MAAAC,EAAO,SAAAC,EAAU,UAAAC,CAAW,IAAK;AAAA;AAAA,uBAErFL,CAAa;AAAA,4BACRD,CAAY,UAAUE,CAAI;AAAA;AAAA;AAAA,+BAGvBC,CAAK;AAAA,+BACLC,CAAK;AAAA,kCACFC,CAAQ;AAAA,mCACPC,CAAS;AAAA;AAAA;AAAA,KAGvC,EAAE,KAAK,EAAE,EAEVT,EAAQ,WAAaE,EAEJ,IAAIQ,EAAe,aAAc,CAC9C,aAAc,IACd,aAAc,KACtB,CAAK,EAEQ,QAAO,CACpB,EC7BMC,EAAa,SAAS,cAAc,cAAc,EAClDC,EAAc,SAAS,cAAc,QAAQ,EACnDA,EAAY,YAAc,YAC1BA,EAAY,UAAU,IAAI,YAAa,QAAQ,EAC/C,SAAS,KAAK,YAAYA,CAAW,EAErC,IAAInB,EAAQ,GAEZkB,EAAW,iBAAiB,SAAU,MAAOE,GAAU,CACnDA,EAAM,eAAc,EACpBpB,EAAQkB,EAAW,SAAS,MAAM,MAAM,KAAI,EAEvClB,IAELI,IACAe,EAAY,UAAU,IAAI,QAAQ,EAClC,MAAME,EAAU,EACpB,CAAC,EAEDF,EAAY,iBAAiB,QAAS,SAAY,CAC9ChB,IACA,MAAMkB,EAAU,CACpB,CAAC,EAED,MAAMA,EAAa,SAAY,CAC3B,GAAI,CACA,MAAMf,EAAS,MAAMP,EAAYC,CAAK,EACtCK,EAAcC,CAAM,EACpBa,EAAY,UAAU,OAAO,QAAQ,EAEjCb,EAAO,OAAS,KAChBa,EAAY,UAAU,IAAI,QAAQ,EAClCX,EAAS,KAAK,CAAE,QAAS,4DAA8D,CAAA,GAG3F,MAAMc,EAAoB,SAAS,cAAc,eAAe,EAAE,sBAAuB,EAAC,OAC1F,OAAO,SAAS,CACZ,IAAKA,EAAoB,EACzB,SAAU,QACtB,CAAS,CACJ,OAAQC,EAAO,CACZ,QAAQ,MAAMA,CAAK,EACnBf,EAAS,MAAM,CAAE,QAAS,wBAA0B,CAAA,CACvD,CACL"}