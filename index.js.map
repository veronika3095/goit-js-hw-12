{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nconst API_KEY = '46051568-7c86afd7f3b7df8cfe693777e';\nconst BASE_URL = 'https://pixabay.com/api/';\nlet page = 1;\n\nexport const fetchImages = async (query) => {\n    const url = `${BASE_URL}?key=${API_KEY}&q=${query}&image_type=photo&orientation=horizontal&safesearch=true&per_page=15&page=${page}`;\n\n    try {\n        const response = await axios.get(url);\n        return response.data.hits;\n    } catch (error) {\n        throw new Error('Error fetching images');\n    }\n};\n\nexport const incrementPage = () => {\n    page += 1;\n};\n\nexport const resetPage = () => {\n    page = 1;\n};","import iziToast from 'izitoast';\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nconst lightbox = new SimpleLightbox('.gallery a', {\n    captionDelay: 250,\n    captionsData: 'alt',\n});\n\nexport const renderGallery = (images) => {\n    const gallery = document.querySelector('.gallery');\n    gallery.innerHTML = ''; \n\n    if (images.length === 0) {\n        iziToast.error({ message: \"Sorry, no images found.\" });\n        return;\n    }\n\n    const markup = images.map(({ webformatURL, largeImageURL, tags, likes, views, comments, downloads }) => \n        `<div class=\"gallery-item\">\n            <a href=\"${largeImageURL}\" class=\"gallery-link\">\n                <img src=\"${webformatURL}\" alt=\"${tags}\" />\n            </a>\n            <div class=\"image-info\">\n                <span>Likes: ${likes}</span>\n                <span>Views: ${views}</span>\n                <span>Comments: ${comments}</span>\n                <span>Downloads: ${downloads}</span>\n            </div>\n        </div>`\n    ).join('');\n\n    gallery.innerHTML = markup;\n    lightbox.refresh();\n};","import { fetchImages, incrementPage, resetPage } from './js/pixabay-api.js';\nimport { renderGallery } from './js/render-functions.js';\nimport iziToast from 'izitoast';\n\nconst searchForm = document.querySelector('.search-form');\nconst loadMoreBtn = document.createElement('button');\nloadMoreBtn.textContent = \"Load more\";\nloadMoreBtn.classList.add('load-more', 'hidden');\ndocument.body.appendChild(loadMoreBtn);\n\nlet query = '';\nlet currentImages = [];\n\nsearchForm.addEventListener('submit', async (event) => {\n    event.preventDefault();\n    query = searchForm.elements.query.value.trim();\n\n    if (!query) return;\n\n    resetPage();\n    loadMoreBtn.classList.add('hidden');\n    currentImages = []; \n    await loadImages();\n});\n\nloadMoreBtn.addEventListener('click', async () => {\n    incrementPage();\n    await loadImages();\n});\n\nconst loadImages = async () => {\n    try {\n        const images = await fetchImages(query);\n        \n        if (images.length === 0) {\n            iziToast.error({ message: \"Sorry, no images found.\" });\n            loadMoreBtn.classList.add('hidden');\n            return;\n        }\n\n        currentImages = [...currentImages, ...images];\n        renderGallery(currentImages);\n\n        if (images.length < 15) {\n            loadMoreBtn.classList.add('hidden');\n            iziToast.info({ message: \"We're sorry, but you've reached the end of search results.\" });\n        } else {\n            loadMoreBtn.classList.remove('hidden');\n        }\n\n        const galleryItemHeight = document.querySelector('.gallery-item')?.getBoundingClientRect().height || 0;\n        window.scrollBy({\n            top: galleryItemHeight * 2,\n            behavior: 'smooth',\n        });\n    } catch (error) {\n        console.error(error);\n        iziToast.error({ message: \"Error fetching images.\" });\n    }\n};\n\nloadMoreBtn.style.marginBottom = '32px';"],"names":["API_KEY","BASE_URL","page","fetchImages","query","url","axios","incrementPage","resetPage","lightbox","SimpleLightbox","renderGallery","images","gallery","iziToast","markup","webformatURL","largeImageURL","tags","likes","views","comments","downloads","searchForm","loadMoreBtn","currentImages","event","loadImages","galleryItemHeight","_a","error"],"mappings":"owBAEA,MAAMA,EAAU,qCACVC,EAAW,2BACjB,IAAIC,EAAO,EAEJ,MAAMC,EAAc,MAAOC,GAAU,CACxC,MAAMC,EAAM,GAAGJ,CAAQ,QAAQD,CAAO,MAAMI,CAAK,6EAA6EF,CAAI,GAElI,GAAI,CAEA,OADiB,MAAMI,EAAM,IAAID,CAAG,GACpB,KAAK,IACxB,MAAe,CACZ,MAAM,IAAI,MAAM,uBAAuB,CAC1C,CACL,EAEaE,EAAgB,IAAM,CAC/BL,GAAQ,CACZ,EAEaM,EAAY,IAAM,CAC3BN,EAAO,CACX,EClBMO,EAAW,IAAIC,EAAe,aAAc,CAC9C,aAAc,IACd,aAAc,KAClB,CAAC,EAEYC,EAAiBC,GAAW,CACrC,MAAMC,EAAU,SAAS,cAAc,UAAU,EAGjD,GAFAA,EAAQ,UAAY,GAEhBD,EAAO,SAAW,EAAG,CACrBE,EAAS,MAAM,CAAE,QAAS,yBAA2B,CAAA,EACrD,MACH,CAED,MAAMC,EAASH,EAAO,IAAI,CAAC,CAAE,aAAAI,EAAc,cAAAC,EAAe,KAAAC,EAAM,MAAAC,EAAO,MAAAC,EAAO,SAAAC,EAAU,UAAAC,CAAW,IAC/F;AAAA,uBACeL,CAAa;AAAA,4BACRD,CAAY,UAAUE,CAAI;AAAA;AAAA;AAAA,+BAGvBC,CAAK;AAAA,+BACLC,CAAK;AAAA,kCACFC,CAAQ;AAAA,mCACPC,CAAS;AAAA;AAAA,eAG5C,EAAM,KAAK,EAAE,EAETT,EAAQ,UAAYE,EACpBN,EAAS,QAAO,CACpB,EC/BMc,EAAa,SAAS,cAAc,cAAc,EAClDC,EAAc,SAAS,cAAc,QAAQ,EACnDA,EAAY,YAAc,YAC1BA,EAAY,UAAU,IAAI,YAAa,QAAQ,EAC/C,SAAS,KAAK,YAAYA,CAAW,EAErC,IAAIpB,EAAQ,GACRqB,EAAgB,CAAA,EAEpBF,EAAW,iBAAiB,SAAU,MAAOG,GAAU,CACnDA,EAAM,eAAc,EACpBtB,EAAQmB,EAAW,SAAS,MAAM,MAAM,KAAI,EAEvCnB,IAELI,IACAgB,EAAY,UAAU,IAAI,QAAQ,EAClCC,EAAgB,CAAA,EAChB,MAAME,EAAU,EACpB,CAAC,EAEDH,EAAY,iBAAiB,QAAS,SAAY,CAC9CjB,IACA,MAAMoB,EAAU,CACpB,CAAC,EAED,MAAMA,EAAa,SAAY,OAC3B,GAAI,CACA,MAAMf,EAAS,MAAMT,EAAYC,CAAK,EAEtC,GAAIQ,EAAO,SAAW,EAAG,CACrBE,EAAS,MAAM,CAAE,QAAS,yBAA2B,CAAA,EACrDU,EAAY,UAAU,IAAI,QAAQ,EAClC,MACH,CAEDC,EAAgB,CAAC,GAAGA,EAAe,GAAGb,CAAM,EAC5CD,EAAcc,CAAa,EAEvBb,EAAO,OAAS,IAChBY,EAAY,UAAU,IAAI,QAAQ,EAClCV,EAAS,KAAK,CAAE,QAAS,4DAA8D,CAAA,GAEvFU,EAAY,UAAU,OAAO,QAAQ,EAGzC,MAAMI,IAAoBC,EAAA,SAAS,cAAc,eAAe,IAAtC,YAAAA,EAAyC,wBAAwB,SAAU,EACrG,OAAO,SAAS,CACZ,IAAKD,EAAoB,EACzB,SAAU,QACtB,CAAS,CACJ,OAAQE,EAAO,CACZ,QAAQ,MAAMA,CAAK,EACnBhB,EAAS,MAAM,CAAE,QAAS,wBAA0B,CAAA,CACvD,CACL,EAEAU,EAAY,MAAM,aAAe"}